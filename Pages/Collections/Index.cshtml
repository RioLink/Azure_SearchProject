@page
@model Azure_SearchProject.Pages.Collections.IndexModel
@attribute [Microsoft.AspNetCore.Authorization.Authorize]

<h2>My collections</h2>

<p><a href="/Collections/Create">Create new</a></p>

<ul>
@foreach (var c in Model.MyCollections)
{
    <li>
        <a href="/Collections/Details?id=@c.Id">@c.Name</a>
        (@(c.IsPublic ? "Public" : "Private"))
        <form method="post" asp-page-handler="Delete" style="display:inline;">
            <input type="hidden" name="id" value="@c.Id" />
            <button type="submit">Delete</button>
        </form>
    </li>
}
</ul>

<hr />
<h3>Public collections (others)</h3>
<ul>
@foreach (var c in Model.PublicCollections)
{
    <li>
        <a href="/Collections/Details?id=@c.Id">@c.Name</a>
        <form method="post" asp-page-handler="ToggleFollow" style="display:inline;">
            <input type="hidden" name="id" value="@c.Id" />
            <button type="submit">@(c.IsFollowedByMe ? "Unfollow" : "Follow")</button>
        </form>
    </li>
}
</ul>
